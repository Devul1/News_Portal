{% extends 'flatpages/default.html' %}

{% load custom_filters %}

{% block title %}
Posts
{% endblock title %}

{% block content %}
<h1>All news</h1>
<br>
<h4>Total news - {{ posts|length }}</h4>
<hr>
{% if posts %}
    <table>
        <tr>
            <td>Header</td>
            <td>Publication date</td>
            <td>Text</td>
        </tr>
        {% for post in sorted_posts %}
        <tr>
            <td>{{ post.header|censor }}</td>
            <td>{{ post.time|date:'d M Y' }}</td>
            <td>{{ post.text|truncatewords:20|censor }}</td>
        </tr>
        {% endfor %}
    </table>
{% endif %}
{% endblock content %}